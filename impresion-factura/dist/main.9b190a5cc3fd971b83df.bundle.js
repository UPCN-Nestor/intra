webpackJsonp([2],{0:function(t,e,n){t.exports=n("x35b")},"5xMp":function(t,e){t.exports='<meta charset="utf-8">\r\n<app-impresion-factura></app-impresion-factura>\r\n'},"6GLz":function(t,e){function n(t){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+t+"'.")})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="6GLz"},ghds:function(t,e){t.exports='\r\n\r\n.big  {\r\n\tfont-size: 2em;\r\n\ttext-align: center;\r\n}\r\n\r\n.big2 {\r\n\tfont-size: 1.6em;\r\n\ttext-align: center;\r\n\tfont-family: "Verdana", Verdana, sans-serif; \t\r\n}\r\n\r\n.big3 {\r\n\tfont-size: 1.2em;\r\n\tpadding: 0px;\r\n\tmargin: 0px;\r\n\ttext-align: center;\r\n\tfont-family: "Verdana", Verdana, sans-serif; \t\r\n}\r\n\r\n.small {\r\n\tfont-size: 0.7em;\r\n\tfont-family: "Verdana", Verdana, sans-serif; \t\r\n}\r\n\r\n.space {\r\n\tmargin: 12px;\t\r\n}\r\n\r\n.hide {\r\n\tdisplay: none;\r\n}\r\n'},okgc:function(t,e){t.exports=""},x35b:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("3j3K"),i=n("O61y"),r=n("Qbdm"),o=n("NVOs"),a=n("Fzro"),c=this&&this.__decorate||function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o},p=function(){return function(){this.title="app"}}();p=c([Object(s.Component)({selector:"app-root",template:n("5xMp"),styles:[n("okgc")]})],p);var l,u,d,m,h,f,g,v,b=!0,y="http://192.168.0.3:80/",_=n("aV/W"),w=(n("EN1B"),n("8ERu")),k=this&&this.__decorate||function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o},x=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},j=n("7t+N"),I=function(){function t(t,e){this.http=t,this.renderer=e,this.urlFoto='linear-gradient(rgba(220, 220, 220, 0.6), rgba(220, 220, 220, 0.6)), url("https://source.unsplash.com/1920x1080/?nature,'}return t.prototype.ngOnInit=function(){this.cualFoto=0,document.body.style.backgroundImage=this.urlFoto+this.cualFoto+'")',this.loading=!1,this.msgs=[],this.socios=[],this.facturas=[],this.paso=1,this.url_deuda=y+"php/userspice/factura_getDeuda.php",this.url_socios=y+"php/userspice/factura_getSocios.php",this.url_suministros=y+"php/userspice/factura_getSuministros.php",this.url_factura_individual=y+"php/userspice/factura_getFactura_jasper.php",this.url_estado_deuda=y+"php/userspice/factura_getEstadoDeuda_jasper.php",this.renderer.addClass(document.body,"fondo_upc"),this.setupKeyboards(),this.idleTimer()},t.prototype.setupKeyboards=function(){j(".ui-keyboard-input").bind("keyboardChange",function(t,e,n){var s="Input ID of "+n.id+" has the accepted content of "+n.value;alert(s)});j("#soc_sumi").keyboard({usePreview:!1,layout:"custom",customLayout:{normal:["{sp:1} 1 2 3 {sp:1} {a}","{sp:1} 4 5 6 {sp:1} {b}","{sp:1} 7 8 9 {sp:4}","{sp:2} 0 {sp:5}"]},display:{accept:"Aceptar",clear:"Borrar"}}),j("#dni").keyboard({usePreview:!1,layout:"custom",customLayout:{normal:["{sp:1} 1 2 3 {sp:1} {a}","{sp:1} 4 5 6 {sp:1} {b}","{sp:1} 7 8 9 {sp:4}","{sp:2} 0 {sp:5}"]},display:{accept:"Aceptar",clear:"Borrar"}}),j("#nombre").keyboard({usePreview:!1,layout:"custom",customLayout:{normal:["Q W E R T Y U I O P {sp:1} 1 2 3 {sp:1} {a}","{sp:0.8} A S D F G H J K L \xd1 {sp:0.2} 4 5 6 {sp:1} {b}","{sp:1.6} Z X C V B N M {sp:4} 7 8 9 {sp:4}","{sp:1.6} {space} {sp:7.1} 0 {sp:4}"]},display:{accept:"Aceptar",clear:"Borrar"}}),j("#direccion").keyboard({usePreview:!1,layout:"custom",customLayout:{normal:["Q W E R T Y U I O P {sp:1} 1 2 3 {sp:1} {a}","{sp:0.8} A S D F G H J K L \xd1 {sp:0.2} 4 5 6 {sp:1} {b}","{sp:1.6} Z X C V B N M {sp:4} 7 8 9 {sp:4}","{sp:1.6} {space} {sp:7.1} 0 {sp:4}"]},display:{accept:"Aceptar",clear:"Borrar"}})},t.prototype.agregarBarra=function(t,e,n,s){var i="";return 5==n.value.length&&"bksp"!=e.last.key&&(i="/"),i+s},t.prototype.imprimir=function(t,e,n,s,i){var r=this;this.blockUI.start("Preparando impresi\xf3n...");var o=new a.c;o.set("letra",t),o.set("pto",e),o.set("numero",n),o.set("servicio",s),o.set("tipofactura",i),this.http.get(this.url_factura_individual,{withCredentials:!0,search:o}).toPromise().then(function(s){try{printJS(y+"php/userspice/facturas/fact_mensual_"+t+"-"+e+"-"+n+".pdf"),r.blockUI.stop(),r.blockUI.start("Imprimiendo factura "+t+"-"+n+". Por favor espere."),setTimeout(function(){r.blockUI.stop()},12e3)}catch(e){r.msgs.push({severity:"error",summary:"Error",detail:"No se pudo imprimir la factura "+t+"-"+n+"."}),r.blockUI.stop()}})},t.prototype.imprimirEstadoDeuda=function(t,e){var n=this;this.blockUI.start("Preparando impresi\xf3n...");var s=new a.c;s.set("socio",t),s.set("suministro",e),this.http.get(this.url_estado_deuda,{withCredentials:!0,search:s}).toPromise().then(function(s){try{var i=(new Date).toISOString().slice(0,10).replace(/-/g,"");printJS(y+"php/userspice/facturas/estado_deuda_"+t+"-"+e+"-"+i+".pdf"),n.blockUI.stop(),n.blockUI.start("Imprimiendo estado de deuda de socio/suministro "+t+"/"+e+". Por favor espere."),setTimeout(function(){n.blockUI.stop()},12e3)}catch(s){n.msgs.push({severity:"error",summary:"Error",detail:"No se pudo imprimir el estado de deuda del socio/suministro "+t+"/"+e+"."}),n.blockUI.stop()}})},t.prototype.seleccionarSocio=function(t){var e=this,n=new a.c;n.set("socio",t),n.set("sumi","0"),n.set("dni","0"),n.set("nombre","0"),this.http.get(this.url_suministros,{withCredentials:!0,search:n}).toPromise().then(function(t){return"error"==t.json()?null:t.json()}).then(function(t){e.suministros=t,e.paso=25,e.checkNoResults()})},t.prototype.seleccionarSuministro=function(t,e){var n=this,s=new a.c;s.set("socio",t),s.set("sumi",e),s.set("dni","0"),s.set("nombre","0"),this.http.get(this.url_deuda,{withCredentials:!0,search:s}).toPromise().then(function(t){return"error"==t.json()?null:t.json()}).then(function(t){n.facturas=t,n.paso=3,n.checkNoResults()})},t.prototype.ngAfterViewInit=function(){var t=this;j(this.ss.nativeElement).on("change",function(e){t.socSumiChange(e)}),j(this.dni.nativeElement).on("change",function(e){t.dniChange(e)}),j(this.nombre.nativeElement).on("change",function(e){t.nombreChange(e)}),j(this.direccion.nativeElement).on("change",function(e){t.direccionChange(e)})},t.prototype.nombreChange=function(t){var e=this,n=this.nombre.nativeElement.value;if(""!=n){var s=new a.c;s.set("nombre",n),s.set("calle","0"),s.set("altura","0"),s.set("piso","x"),s.set("depto","x"),this.http.get(this.url_socios,{withCredentials:!0,search:s}).toPromise().then(function(t){return"error"==t.json()?null:t.json()}).then(function(t){e.socios=t,e.paso=2,e.checkNoResults()})}},t.prototype.direccionChange=function(t){var e=this,n=this.direccion.nativeElement.value,s=n.split(" "),i=s[0];i=i.replace("-"," ");var r=s[1],o=s[2]||"x",c=s[3]||"x";if(""!=n){i.indexOf("DIAG")>-1&&(i="DIAG.SAN MARTIN");var p=new a.c;p.set("nombre","0"),p.set("calle",i),p.set("altura",r),p.set("piso",o),p.set("depto",c),this.http.get(this.url_socios,{withCredentials:!0,search:p}).toPromise().then(function(t){return"error"==t.json()?null:t.json()}).then(function(t){e.socios=t,e.paso=2,e.checkNoResults()})}},t.prototype.socSumiChange=function(t){var e=this;if(""!=this.ss.nativeElement.value){var n=this.ss.nativeElement.value.split("/"),s=new a.c;s.set("socio",n[0]?n[0]:"0"),s.set("sumi",n[1]?n[1]:"0"),s.set("dni","0"),s.set("nombre","0"),this.http.get(this.url_suministros,{withCredentials:!0,search:s}).toPromise().then(function(t){return"error"==t.json()?null:t.json()}).then(function(t){e.suministros=t,e.paso=25,e.checkNoResults()})}},t.prototype.dniChange=function(t){var e=this;if(""!=this.dni.nativeElement.value){var n=new a.c;n.set("socio","0"),n.set("sumi","0"),n.set("dni",this.dni.nativeElement.value),n.set("nombre","0"),this.http.get(this.url_suministros,{withCredentials:!0,search:n}).toPromise().then(function(t){return"error"==t.json()?null:t.json()}).then(function(t){e.suministros=t,e.paso=25,e.checkNoResults()})}},t.prototype.checkNoResults=function(){this.msgs=[],2==this.paso&&0==this.socios.length&&(this.restart(),this.msgs.push({severity:"error",summary:"Advertencia",detail:"No se han encontrado socios con facturas con los datos ingresados."})),25==this.paso&&0==this.suministros.length&&(this.restart(),this.msgs.push({severity:"error",summary:"Advertencia",detail:"No se han encontrado socios con suministros activos con los datos ingresados."})),3==this.paso&&0==this.facturas.length&&(this.atras(),this.msgs.push({severity:"error",summary:"Advertencia",detail:"No se han encontrado facturas en el suministro seleccionado."}))},t.prototype.atras=function(){2==this.paso&&(this.paso=1),25==this.paso&&(this.paso=1),3==this.paso&&(this.paso=25)},t.prototype.restart=function(){this.cualFoto++,document.body.style.backgroundImage=this.urlFoto+this.cualFoto+'")',this.socios=[],this.facturas=[],this.ss.nativeElement.value="",this.nombre.nativeElement.value="",this.dni.nativeElement.value="",this.direccion.nativeElement.value="",this.paso=1,this.msgs=[]},t.prototype.idleTimer=function(){var t;function e(){window.location.href=self.location.href}function n(){clearTimeout(t),t=setTimeout(e,3e5)}window.onmousemove=n,window.onmousedown=n,window.onclick=n,window.onscroll=n,window.onkeypress=n},t}();k([Object(w.BlockUI)(),x("design:type","function"==typeof(l="undefined"!=typeof w.NgBlockUI&&w.NgBlockUI)&&l||Object)],I.prototype,"blockUI",void 0),k([Object(s.ViewChild)("soc_sumi"),x("design:type","function"==typeof(u="undefined"!=typeof s.ElementRef&&s.ElementRef)&&u||Object)],I.prototype,"ss",void 0),k([Object(s.ViewChild)("dni"),x("design:type","function"==typeof(d="undefined"!=typeof s.ElementRef&&s.ElementRef)&&d||Object)],I.prototype,"dni",void 0),k([Object(s.ViewChild)("nombre"),x("design:type","function"==typeof(m="undefined"!=typeof s.ElementRef&&s.ElementRef)&&m||Object)],I.prototype,"nombre",void 0),k([Object(s.ViewChild)("direccion"),x("design:type","function"==typeof(h="undefined"!=typeof s.ElementRef&&s.ElementRef)&&h||Object)],I.prototype,"direccion",void 0),k([Object(s.ViewChild)("op"),x("design:type","function"==typeof(f="undefined"!=typeof _.OverlayPanel&&_.OverlayPanel)&&f||Object)],I.prototype,"panel",void 0),I=k([Object(s.Injectable)(),Object(s.Component)({selector:"app-impresion-factura",template:n("yuFk"),styles:[n("ghds")]}),x("design:paramtypes",["function"==typeof(g="undefined"!=typeof a.a&&a.a)&&g||Object,"function"==typeof(v="undefined"!=typeof s.Renderer2&&s.Renderer2)&&v||Object])],I);var S=n("KN8t"),C=this&&this.__decorate||function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o},O=function(){return function(){}}();O=C([Object(s.NgModule)({declarations:[p,I],imports:[w.BlockUIModule,_.DataListModule,_.DataGridModule,_.MultiSelectModule,_.OverlayPanelModule,_.MessagesModule,r.BrowserModule,S.a,o.FormsModule,a.b,_.DataTableModule,_.DropdownModule,_.GrowlModule,_.CheckboxModule,_.DragDropModule,_.PanelModule,_.InputTextModule,_.PasswordModule,_.SliderModule,_.ButtonModule,_.DialogModule,_.ConfirmDialogModule,_.ToolbarModule,_.TooltipModule,_.InputMaskModule],exports:[a.b],providers:[],bootstrap:[p]})],O),b&&Object(s.enableProdMode)(),Object(i.a)().bootstrapModule(O).catch(function(t){return console.log(t)})},yuFk:function(t,e){t.exports='<meta charset="utf-8">\r\n\r\n<block-ui>\r\n\r\n<div class="big3"><p-messages [(value)]="msgs"></p-messages></div>\r\n\r\n<div style="width: 1000px; margin-top:25px; margin-left:auto; margin-right:auto;" class="{{paso != 1 ? \'hide\' : \'\'}}">\r\n\r\n\t<p-dataTable emptyMessage="" rowStyleClass="rowInvisible">\r\n\t\t<p-header>\r\n\t\t\t<div class="big2">Ingrese uno de los siguientes datos</div>\r\n\t\t</p-header>\r\n\t\t<ng-template pTemplate="emptymessage">\r\n\t\t\t\r\n\t\t</ng-template>\r\n\t</p-dataTable>\r\n\t\r\n\t<div class="space"></div>\t\r\n\t\r\n\t<div class="big">\r\n\t<input class="big" #soc_sumi id="soc_sumi" size="20" placeholder="Socio" />\r\n\t</div>\r\n\r\n\t<div class="space"></div>\t\r\n\t\r\n\t<div class="big">\r\n\t<input class="big" #dni id="dni" size="20" placeholder="D.N.I." />\r\n\t</div>\r\n\t\r\n\t<div class="space"></div>\t\r\n\t\r\n\t<div class="big">\r\n\t<input class="big" #nombre id="nombre"  size="20" placeholder="Apellido y nombres" />\r\n\t</div>\r\n\t\r\n\t<div class="space"></div>\t\r\n\t\r\n\t<div class="big">\r\n\t<input class="big" #direccion id="direccion"  size="20" placeholder="Domicilio" />\r\n\t</div>\r\n\t\r\n</div>\r\n\r\n\r\n<div class="space"></div>\t\r\n<div  *ngIf="paso != 1" class="big2">\r\n<button pButton type="button" style="height: 128px; width: 128px;" icon="fa-arrow-left fa-3x" (click)="atras()"></button>\r\n</div>\r\n\r\n<div *ngIf="paso == 3" ui-g>\r\n\r\n\t<div style="margin: 25px; background-color:transparent;">\r\n\t\t<p-dataGrid [value]="facturas" >\r\n\t\t<p-header>\r\n\t\t\t<div class="big2">Seleccione factura a imprimir</div>\r\n\t\t</p-header>\r\n\t\t\t<ng-template let-fact pTemplate="item">\r\n\t\t\t<div style="padding:15px;" class="ui-md-3">\r\n\t\t\t\t<p-panel class="big2" [header]="fact.Comp_letra + \'-\' + fact.Comp_sucur + \'-\' + fact.Comp_numer + \' / $\' + fact.CompSaldo.substring(0, fact.CompSaldo.length - 2).replace(\'.\', \',\')" \r\n\t\t\t\t\t\t[style]="{\'text-align\':\'center\', \'background-color\':(fact.Pagada==\'S\'?\'\':\'#FFDDDD\')}">\r\n\t\t\t\t\t<div> <button pButton type="button" style="height: 128px; width: 128px;" icon="fa-print fa-3x" (click)="imprimir(fact.Comp_letra, fact.Ptovta_base_impresion, fact.Comp_base_impresion, fact.Fac1Servic, fact.TipoFactura)"></button> </div>\t                \r\n\t\t\t\t\t\t<hr class="ui-widget-content" style="border-top:0">\r\n\t\t\t\t\t\t<div class="small">Emisi\xf3n: {{fact.Comp_fecha}}</div>\r\n\t\t\t\t\t\t<div class="small">Vence: {{fact.Comp_vto1}} {{(fact.Pagada==\'S\'?\'\':\' (Impaga)\')}}</div>\r\n\t\t\t\t</p-panel> \r\n\t\t\t</div>\r\n\t\t</ng-template>\r\n\t\t</p-dataGrid>\r\n\t</div>\r\n</div>\r\n\r\n<div *ngIf="paso == 25" ui-g>\r\n\t<div style="margin: 25px; background-color:transparent;">\r\n\t\t<p-dataGrid [value]="suministros" >\r\n\t\t<p-header>\r\n\t\t\t<div class="big2">Suministros de {{suministros[0].Soc_apelli}}</div>\r\n\t\t</p-header>\r\n\t\t\t<ng-template let-sumi pTemplate="item">\r\n\t\t\t<div style="padding:15px" class="ui-md-3">\r\n\t\t\t\t<p-panel class="big2" [style]="{\'text-align\':\'center\'}">\r\n\t\t\t\t\t<p-header>\r\n\t\t\t\t\t\t<span class="fa-stack">\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<span class="fa fa-circle-o fa-stack-2x"></span>\r\n\t\t\t\t\t\t\t<strong class="fa-stack-1x">{{sumi.Sumi_numer}}</strong>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span *ngIf="sumi.Servicios % 2 == 0" class="fa fa-plug"></span>\r\n\t\t\t\t\t\t<span *ngIf="sumi.Servicios % 3 == 0" class="fa fa-wifi"></span>\r\n\t\t\t\t\t\t<span *ngIf="sumi.Servicios % 5 == 0" class="fa fa-medkit"></span>\t\t\r\n\t\t\t\t\t\t<span style=""></span>\t\t\t\r\n\t\t\t\t\t\t/  ${{sumi.Impago.substring(0, sumi.Impago.length - 2).replace(\'.\', \',\')}}\r\n\t\t\t\t\t</p-header>\r\n\t\t\t\t\t<div> <button pButton type="button" style="height: 90px; width: 300px;" icon="fa-list-ul" label="  Comprobantes" (click)="seleccionarSuministro(sumi.Soc_numero, sumi.Sumi_numer)"></button> </div>\t \r\n\t\t\t\t\t<div> <button pButton type="button" style="height: 90px; width: 300px;" icon="fa-print" label="   Estado de deuda" (click)="imprimirEstadoDeuda(sumi.Soc_numero, sumi.Sumi_numer)"></button> </div>\t                \r\n\t\t\t\t\t\t<hr class="ui-widget-content" style="border-top:0">\r\n\t\t\t\t\t\t<div class="small">Domicilio: {{sumi.Sumi_calle}} {{sumi.Sumi_nroca}} {{(sumi.Sumi_piso == 0 ? "" : " Piso " + sumi.Sumi_piso)}} {{(sumi.Sumi_depto.trim() == "" ? "" : "Depto. " + sumi.Sumi_depto)}}</div>\r\n\t\t\t\t</p-panel> \r\n\t\t\t</div>\r\n\t\t</ng-template>\r\n\t\t</p-dataGrid>\r\n\t</div>\r\n</div>\r\n\r\n<div *ngIf="paso == 2" style="width: 820px; text-align:center; margin-top:50px; margin-left:auto; margin-right:auto;  background-color:transparent;">\r\n\t\t<p-dataList [value]="socios">\r\n\t\t   <p-header>\r\n\t\t\t   <div class="big2">Seleccione el titular del servicio</div>\r\n\t\t   </p-header>\r\n\t\t   <ng-template let-socio pTemplate="item">\r\n\t\t\t<div  style="padding:10px" >\r\n\t\t\t\t  <div> <input class="big" type="button" style="height: 100px; width: 782px;" \r\n\t\t\t\t\t\t value="{{socio.Soc_apelli}}"\r\n\t\t\t\t\t\t (click)="seleccionarSocio(socio.Soc_numero)"/> \r\n\t\t\t\t  </div>\t                \r\n\t\t\t</div>\r\n\t\t   </ng-template>\r\n\t\t</p-dataList>\r\n</div>\r\n\r\n\r\n\r\n\r\n</block-ui>\r\n\r\n\r\n'}},[0]);